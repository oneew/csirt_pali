<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - CSIRT PALI Admin</title>
    <link rel="stylesheet" href="frontend/css/admin.css">
    <link rel="stylesheet" href="frontend/css/setting.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div class="admin-layout">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="sidebar-logo">
                    <img src="frontend/images/Logo.png" alt="CSIRT PALI">
                    <span>CSIRT PALI</span>
                </div>
            </div>

            <nav class="sidebar-nav">
                <div class="nav-section">
                    <div class="nav-section-title">Main</div>
                    <div class="nav-item">
                        <a href="/admin/dashboard" class="nav-link active">
                            <i class="nav-icon fas fa-tachometer-alt"></i>
                            Dashboard
                        </a>
                    </div>
                </div>

                <div class="nav-section">
                    <div class="nav-section-title">Management</div>
                    <div class="nav-item">
                        <a href="/admin/incidents" class="nav-link">
                            <i class="nav-icon fas fa-exclamation-triangle"></i>
                            Incidents
                                <span class="badge"></span>
                        </a>
                    </div>
                    <div class="nav-item">
                        <a href="/admin/news" class="nav-link">
                            <i class="nav-icon fas fa-newspaper"></i>
                            News & Updates
                        </a>
                    </div>
                    <div class="nav-item">
                        <a href="/admin/users" class="nav-link">
                            <i class="nav-icon fas fa-users"></i>
                            Users
                        </a>
                    </div>
                </div>

                <div class="nav-section">
                    <div class="nav-section-title">Reports</div>
                    <div class="nav-item">
                        <a href="/admin/reports" class="nav-link">
                            <i class="nav-icon fas fa-chart-bar"></i>
                            Analytics
                        </a>
                    </div>
                    <div class="nav-item">
                        <a href="/admin/reports/security" class="nav-link">
                            <i class="nav-icon fas fa-shield-alt"></i>
                            Security Logs
                        </a>
                    </div>
                </div>
                <div class="nav-section">
                    <div class="nav-section-title">System</div>
                    <div class="nav-item">
                        <a href="/admin/settings" class="nav-link">
                            <i class="nav-icon fas fa-cog"></i>
                            Settings
                        </a>
                    </div>
                </div>

                <div class="nav-section">
                    <div class="nav-section-title">Account</div>
                    <div class="nav-item">
                        <a href="/my-profile" class="nav-link">
                            <i class="nav-icon fas fa-user"></i>
                            Profile
                        </a>
                    </div>
                    <div class="nav-item">
                        <a href="/logout" class="nav-link" onclick="event.preventDefault(); document.getElementById('logout-form').submit();">
                            <i class="nav-icon fas fa-sign-out-alt"></i>
                            Logout
                        </a>
                    </div>
                </div>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="main-content" id="mainContent">
            <!-- Header -->
            <header class="header">
                <div class="header-left">
                    <button class="sidebar-toggle" id="sidebarToggle">
                        <i class="fas fa-bars"></i>
                    </button>
                    <h1 class="page-title">Dashboard</h1>
                </div>

                <div class="header-right">
                    <div class="search-box">
                        <i class="search-icon fas fa-search"></i>
                        <input type="text" class="search-input" placeholder="Search...">
                    </div>

                    <div class="notifications">
                        <button class="notification-btn">
                            <i class="fas fa-bell"></i>
                            <span class="notification-dot"></span>
                        </button>
                    </div>

                    <div class="user-menu">
                        <button class="user-btn">
                            <div class="user-avatar">
                            </div>
                            <span></span>
                            <i class="fas fa-chevron-down"></i>
                        </button>
                    </div>
                </div>
            </header>

            <!-- Page Content -->
            <div class="page-content">
                <div class="form-container">
                    <div class="form-header">
                        <div class="form-title">
                            <i class="fas fa-cog"></i>
                            <h1>System Settings</h1>
                        </div>
                        <div class="form-actions">
                            <button type="button" class="btn btn-success" id="saveAllSettings">
                                <i class="fas fa-save"></i>
                                Save All Settings
                            </button>
                        </div>
                    </div>

                    <!-- Settings Tabs -->
                    <div class="settings-tabs">
                        <button class="tab-btn active" data-tab="general">
                            <i class="fas fa-cog"></i>
                            General
                        </button>
                        <button class="tab-btn" data-tab="security">
                            <i class="fas fa-shield-alt"></i>
                            Security
                        </button>
                        <button class="tab-btn" data-tab="email">
                            <i class="fas fa-envelope"></i>
                            Email
                        </button>
                        <button class="tab-btn" data-tab="notifications">
                            <i class="fas fa-bell"></i>
                            Notifications
                        </button>
                        <button class="tab-btn" data-tab="backup">
                            <i class="fas fa-database"></i>
                            Backup
                        </button>
                    </div>

                    <form class="form-card" id="settingsForm">
                        <!-- General Settings -->
                        <div class="tab-content active" id="general">
                            <div class="form-section">
                                <h3 class="section-title">Organization Information</h3>
                                <div class="form-grid">
                                    <div class="form-group">
                                        <label for="org_name" class="form-label required">Organization Name</label>
                                        <input type="text" id="org_name" name="org_name" class="form-input" value="CSIRT PALI" required>
                                    </div>

                                    <div class="form-group">
                                        <label for="org_email" class="form-label required">Primary Email</label>
                                        <input type="email" id="org_email" name="org_email" class="form-input" value="contact@csirtpali.id" required>
                                    </div>

                                    <div class="form-group">
                                        <label for="org_phone" class="form-label">Phone Number</label>
                                        <input type="tel" id="org_phone" name="org_phone" class="form-input" value="+62 711 123456">
                                    </div>

                                    <div class="form-group">
                                        <label for="org_website" class="form-label">Website</label>
                                        <input type="url" id="org_website" name="org_website" class="form-input" value="https://csirtpali.id">
                                    </div>

                                    <div class="form-group full-width">
                                        <label for="org_address" class="form-label">Address</label>
                                        <textarea id="org_address" name="org_address" class="form-textarea" rows="3">Jl. Srijaya Negara, Bukit Besar, Ilir Bar. I, Palembang, South Sumatra 30139</textarea>
                                    </div>
                                </div>
                            </div>

                            <div class="form-section">
                                <h3 class="section-title">System Configuration</h3>
                                <div class="form-grid">
                                    <div class="form-group">
                                        <label for="timezone" class="form-label">Default Timezone</label>
                                        <select id="timezone" name="timezone" class="form-select">
                                            <option value="Asia/Jakarta" selected>WIB (UTC+7)</option>
                                            <option value="Asia/Makassar">WITA (UTC+8)</option>
                                            <option value="Asia/Jayapura">WIT (UTC+9)</option>
                                        </select>
                                    </div>

                                    <div class="form-group">
                                        <label for="language" class="form-label">Default Language</label>
                                        <select id="language" name="language" class="form-select">
                                            <option value="en" selected>English</option>
                                            <option value="id">Bahasa Indonesia</option>
                                        </select>
                                    </div>

                                    <div class="form-group">
                                        <label for="date_format" class="form-label">Date Format</label>
                                        <select id="date_format" name="date_format" class="form-select">
                                            <option value="d/m/Y" selected>DD/MM/YYYY</option>
                                            <option value="m/d/Y">MM/DD/YYYY</option>
                                            <option value="Y-m-d">YYYY-MM-DD</option>
                                        </select>
                                    </div>

                                    <div class="form-group">
                                        <label for="items_per_page" class="form-label">Items Per Page</label>
                                        <select id="items_per_page" name="items_per_page" class="form-select">
                                            <option value="10">10</option>
                                            <option value="25" selected>25</option>
                                            <option value="50">50</option>
                                            <option value="100">100</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Security Settings -->
                        <div class="tab-content" id="security" style="display: none;">
                            <div class="form-section">
                                <h3 class="section-title">Authentication Settings</h3>
                                <div class="form-grid">
                                    <div class="form-group">
                                        <label for="session_timeout" class="form-label">Session Timeout (minutes)</label>
                                        <input type="number" id="session_timeout" name="session_timeout" class="form-input" value="30" min="5" max="1440">
                                    </div>

                                    <div class="form-group">
                                        <label for="max_login_attempts" class="form-label">Max Login Attempts</label>
                                        <input type="number" id="max_login_attempts" name="max_login_attempts" class="form-input" value="5" min="3" max="10">
                                    </div>

                                    <div class="form-group">
                                        <label for="lockout_duration" class="form-label">Account Lockout Duration (minutes)</label>
                                        <input type="number" id="lockout_duration" name="lockout_duration" class="form-input" value="15" min="5" max="60">
                                    </div>

                                    <div class="form-group">
                                        <label class="form-label">Security Options</label>
                                        <div class="checkbox-group">
                                            <label class="checkbox-label">
                                                <input type="checkbox" name="force_https" value="1" checked>
                                                <span class="checkmark"></span>
                                                Force HTTPS connections
                                            </label>
                                            <label class="checkbox-label">
                                                <input type="checkbox" name="two_factor_required" value="1">
                                                <span class="checkmark"></span>
                                                Require two-factor authentication
                                            </label>
                                            <label class="checkbox-label">
                                                <input type="checkbox" name="password_complexity" value="1" checked>
                                                <span class="checkmark"></span>
                                                Enforce password complexity rules
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="form-section">
                                <h3 class="section-title">IP Restrictions</h3>
                                <div class="form-grid">
                                    <div class="form-group full-width">
                                        <label for="allowed_ips" class="form-label">Allowed IP Addresses</label>
                                        <textarea id="allowed_ips" name="allowed_ips" class="form-textarea" rows="4" placeholder="Enter IP addresses or ranges, one per line&#10;Example:&#10;192.168.1.0/24&#10;203.0.113.10"></textarea>
                                        <small style="color: #6b7280; font-size: 0.75rem;">Leave empty to allow all IPs. Use CIDR notation for ranges.</small>
                                    </div>

                                    <div class="form-group full-width">
                                        <label for="blocked_ips" class="form-label">Blocked IP Addresses</label>
                                        <textarea id="blocked_ips" name="blocked_ips" class="form-textarea" rows="4" placeholder="Enter IP addresses to block, one per line"></textarea>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Email Settings -->
                        <div class="tab-content" id="email" style="display: none;">
                            <div class="form-section">
                                <h3 class="section-title">SMTP Configuration</h3>
                                <div class="form-grid">
                                    <div class="form-group">
                                        <label for="smtp_host" class="form-label required">SMTP Host</label>
                                        <input type="text" id="smtp_host" name="smtp_host" class="form-input" value="smtp.gmail.com" required>
                                    </div>

                                    <div class="form-group">
                                        <label for="smtp_port" class="form-label required">SMTP Port</label>
                                        <input type="number" id="smtp_port" name="smtp_port" class="form-input" value="587" required>
                                    </div>

                                    <div class="form-group">
                                        <label for="smtp_username" class="form-label required">SMTP Username</label>
                                        <input type="text" id="smtp_username" name="smtp_username" class="form-input" required>
                                    </div>

                                    <div class="form-group">
                                        <label for="smtp_password" class="form-label required">SMTP Password</label>
                                        <div class="password-input">
                                            <input type="password" id="smtp_password" name="smtp_password" class="form-input" required>
                                            <button type="button" class="password-toggle" onclick="togglePassword('smtp_password')">
                                                <i class="fas fa-eye"></i>
                                            </button>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label for="smtp_encryption" class="form-label">Encryption</label>
                                        <select id="smtp_encryption" name="smtp_encryption" class="form-select">
                                            <option value="tls" selected>TLS</option>
                                            <option value="ssl">SSL</option>
                                            <option value="none">None</option>
                                        </select>
                                    </div>

                                    <div class="form-group">
                                        <label for="from_email" class="form-label required">From Email</label>
                                        <input type="email" id="from_email" name="from_email" class="form-input" value="noreply@csirtpali.id" required>
                                    </div>

                                    <div class="form-group">
                                        <label for="from_name" class="form-label">From Name</label>
                                        <input type="text" id="from_name" name="from_name" class="form-input" value="CSIRT PALI">
                                    </div>

                                    <div class="form-group">
                                        <button type="button" class="btn btn-secondary" id="testEmail">
                                            <i class="fas fa-paper-plane"></i>
                                            Test Email Configuration
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <div class="form-section">
                                <h3 class="section-title">Email Templates</h3>
                                <div class="form-grid">
                                    <div class="form-group full-width">
                                        <label for="incident_notification_template" class="form-label">Incident Notification Template</label>
                                        <textarea id="incident_notification_template" name="incident_notification_template" class="form-textarea" rows="6">Dear {recipient_name},

A new incident has been reported:

Title: {incident_title}
Severity: {incident_severity}
Date: {incident_date}

Please review and take appropriate action.

Best regards,
CSIRT PALI Team</textarea>
                                    </div>

                                    <div class="form-group full-width">
                                        <label for="user_welcome_template" class="form-label">New User Welcome Template</label>
                                        <textarea id="user_welcome_template" name="user_welcome_template" class="form-textarea" rows="6">Welcome to CSIRT PALI, {user_name}!

Your account has been created successfully:

Username: {username}
Email: {user_email}

Please log in and change your password on first access.

Best regards,
CSIRT PALI Team</textarea>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Notification Settings -->
                        <div class="tab-content" id="notifications" style="display: none;">
                            <div class="form-section">
                                <h3 class="section-title">Alert Thresholds</h3>
                                <div class="form-grid">
                                    <div class="form-group">
                                        <label for="critical_incident_threshold" class="form-label">Critical Incident Alert Threshold</label>
                                        <input type="number" id="critical_incident_threshold" name="critical_incident_threshold" class="form-input" value="1" min="1">
                                        <small style="color: #6b7280; font-size: 0.75rem;">Number of critical incidents before sending alert</small>
                                    </div>

                                    <div class="form-group">
                                        <label for="failed_login_threshold" class="form-label">Failed Login Alert Threshold</label>
                                        <input type="number" id="failed_login_threshold" name="failed_login_threshold" class="form-input" value="10" min="1">
                                        <small style="color: #6b7280; font-size: 0.75rem;">Number of failed logins before sending alert</small>
                                    </div>

                                    <div class="form-group">
                                        <label for="disk_usage_threshold" class="form-label">Disk Usage Alert Threshold (%)</label>
                                        <input type="number" id="disk_usage_threshold" name="disk_usage_threshold" class="form-input" value="85" min="1" max="100">
                                    </div>

                                    <div class="form-group">
                                        <label for="memory_usage_threshold" class="form-label">Memory Usage Alert Threshold (%)</label>
                                        <input type="number" id="memory_usage_threshold" name="memory_usage_threshold" class="form-input" value="90" min="1" max="100">
                                    </div>
                                </div>
                            </div>

                            <div class="form-section">
                                <h3 class="section-title">Notification Channels</h3>
                                <div class="form-grid">
                                    <div class="form-group">
                                        <label class="form-label">Critical Incidents</label>
                                        <div class="checkbox-group">
                                            <label class="checkbox-label">
                                                <input type="checkbox" name="critical_email" value="1" checked>
                                                <span class="checkmark"></span>
                                                Email notification
                                            </label>
                                            <label class="checkbox-label">
                                                <input type="checkbox" name="critical_sms" value="1" checked>
                                                <span class="checkmark"></span>
                                                SMS notification
                                            </label>
                                            <label class="checkbox-label">
                                                <input type="checkbox" name="critical_webhook" value="1">
                                                <span class="checkmark"></span>
                                                Webhook notification
                                            </label>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label class="form-label">System Alerts</label>
                                        <div class="checkbox-group">
                                            <label class="checkbox-label">
                                                <input type="checkbox" name="system_email" value="1" checked>
                                                <span class="checkmark"></span>
                                                Email notification
                                            </label>
                                            <label class="checkbox-label">
                                                <input type="checkbox" name="system_dashboard" value="1" checked>
                                                <span class="checkmark"></span>
                                                Dashboard notification
                                            </label>
                                        </div>
                                    </div>

                                    <div class="form-group full-width">
                                        <label for="webhook_url" class="form-label">Webhook URL</label>
                                        <input type="url" id="webhook_url" name="webhook_url" class="form-input" placeholder="https://hooks.slack.com/services/...">
                                        <small style="color: #6b7280; font-size: 0.75rem;">For Slack, Discord, or other webhook integrations</small>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Backup Settings -->
                        <div class="tab-content" id="backup" style="display: none;">
                            <div class="form-section">
                                <h3 class="section-title">Automatic Backup</h3>
                                <div class="form-grid">
                                    <div class="form-group">
                                        <label for="backup_frequency" class="form-label">Backup Frequency</label>
                                        <select id="backup_frequency" name="backup_frequency" class="form-select">
                                            <option value="disabled">Disabled</option>
                                            <option value="daily" selected>Daily</option>
                                            <option value="weekly">Weekly</option>
                                            <option value="monthly">Monthly</option>
                                        </select>
                                    </div>

                                    <div class="form-group">
                                        <label for="backup_time" class="form-label">Backup Time</label>
                                        <input type="time" id="backup_time" name="backup_time" class="form-input" value="02:00">
                                    </div>

                                    <div class="form-group">
                                        <label for="backup_retention" class="form-label">Retention Period (days)</label>
                                        <input type="number" id="backup_retention" name="backup_retention" class="form-input" value="30" min="1" max="365">
                                    </div>

                                    <div class="form-group">
                                        <label for="backup_location" class="form-label">Backup Location</label>
                                        <select id="backup_location" name="backup_location" class="form-select">
                                            <option value="local" selected>Local Storage</option>
                                            <option value="s3">Amazon S3</option>
                                            <option value="google_cloud">Google Cloud Storage</option>
                                            <option value="azure">Azure Blob Storage</option>
                                        </select>
                                    </div>
                                </div>
                            </div>

                            <div class="form-section">
                                <h3 class="section-title">Backup Actions</h3>
                                <div class="form-grid">
                                    <div class="form-group">
                                        <label class="form-label">Manual Backup</label>
                                        <button type="button" class="btn btn-primary" id="createBackup">
                                            <i class="fas fa-download"></i>
                                            Create Backup Now
                                        </button>
                                        <small style="color: #6b7280; font-size: 0.75rem; margin-top: 0.5rem; display: block;">Create an immediate backup of the system</small>
                                    </div>

                                    <div class="form-group">
                                        <label class="form-label">Restore Backup</label>
                                        <div class="file-upload">
                                            <input type="file" id="restore_backup" name="restore_backup" accept=".sql,.zip">
                                            <label for="restore_backup" class="file-upload-label">
                                                <i class="fas fa-upload"></i>
                                                <div>
                                                    <div>Select backup file to restore</div>
                                                    <small>SQL or ZIP files only</small>
                                                </div>
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="form-section">
                                <h3 class="section-title">Recent Backups</h3>
                                <div class="backup-list">
                                    <div class="backup-item">
                                        <div class="backup-info">
                                            <div class="backup-name">csirt_backup_20250826_020000.zip</div>
                                            <div class="backup-meta">Created: Aug 26, 2025 02:00 AM • Size: 145.2 MB</div>
                                        </div>
                                        <div class="backup-actions">
                                            <button class="btn btn-secondary btn-sm">
                                                <i class="fas fa-download"></i>
                                                Download
                                            </button>
                                            <button class="btn btn-danger btn-sm">
                                                <i class="fas fa-trash"></i>
                                                Delete
                                            </button>
                                        </div>
                                    </div>

                                    <div class="backup-item">
                                        <div class="backup-info">
                                            <div class="backup-name">csirt_backup_20250825_020000.zip</div>
                                            <div class="backup-meta">Created: Aug 25, 2025 02:00 AM • Size: 143.8 MB</div>
                                        </div>
                                        <div class="backup-actions">
                                            <button class="btn btn-secondary btn-sm">
                                                <i class="fas fa-download"></i>
                                                Download
                                            </button>
                                            <button class="btn btn-danger btn-sm">
                                                <i class="fas fa-trash"></i>
                                                Delete
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="form-actions-bottom">
                            <button type="button" class="btn btn-secondary" id="resetSettings">
                                <i class="fas fa-undo"></i>
                                Reset to Default
                            </button>
                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-save"></i>
                                Save Settings
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </main>
    </div>

    <script>
        // Sidebar toggle functionality
        const sidebarToggle = document.getElementById('sidebarToggle');
        const sidebar = document.getElementById('sidebar');
        const mainContent = document.getElementById('mainContent');

        sidebarToggle.addEventListener('click', function() {
            if (window.innerWidth <= 768) {
                sidebar.classList.toggle('show');
            } else {
                sidebar.classList.toggle('collapsed');
                mainContent.classList.toggle('expanded');
            }
        });

        // Tab functionality
        const tabBtns = document.querySelectorAll('.tab-btn');
        const tabContents = document.querySelectorAll('.tab-content');

        tabBtns.forEach(btn => {
            btn.addEventListener('click', function() {
                const targetTab = this.getAttribute('data-tab');
                
                // Remove active class from all tabs and contents
                tabBtns.forEach(b => b.classList.remove('active'));
                tabContents.forEach(content => {
                    content.classList.remove('active');
                    content.style.display = 'none';
                });
                
                // Add active class to clicked tab and show content
                this.classList.add('active');
                document.getElementById(targetTab).classList.add('active');
                document.getElementById(targetTab).style.display = 'block';
            });
        });

        // Password toggle functionality
        function togglePassword(fieldId) {
            const field = document.getElementById(fieldId);
            const button = field.nextElementSibling;
            const icon = button.querySelector('i');
            
            if (field.type === 'password') {
                field.type = 'text';
                icon.classList.remove('fa-eye');
                icon.classList.add('fa-eye-slash');
            } else {
                field.type = 'password';
                icon.classList.remove('fa-eye-slash');
                icon.classList.add('fa-eye');
            }
        }

        // Test email configuration
        document.getElementById('testEmail').addEventListener('click', function() {
            const btn = this;
            const originalText = btn.innerHTML;
            
            btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Testing...';
            btn.disabled = true;
            
            // Simulate API call
            setTimeout(() => {
                alert('Test email sent successfully!');
                btn.innerHTML = originalText;
                btn.disabled = false;
            }, 3000);
        });

        // Create backup
        document.getElementById('createBackup').addEventListener('click', function() {
            const btn = this;
            const originalText = btn.innerHTML;
            
            btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Creating Backup...';
            btn.disabled = true;
            
            // Simulate backup creation
            setTimeout(() => {
                alert('Backup created successfully!');
                btn.innerHTML = originalText;
                btn.disabled = false;
                
                // Add new backup to list (simulate)
                location.reload();
            }, 5000);
        });

        // Save all settings
        document.getElementById('saveAllSettings').addEventListener('click', function() {
            document.getElementById('settingsForm').dispatchEvent(new Event('submit'));
        });

        // Form submission
        document.getElementById('settingsForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const submitBtn = e.submitter || document.querySelector('button[type="submit"]');
            const originalText = submitBtn.innerHTML;
            
            submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Saving...';
            submitBtn.disabled = true;
            
            // Simulate API call
            setTimeout(() => {
                alert('Settings saved successfully!');
                submitBtn.innerHTML = originalText;
                submitBtn.disabled = false;
            }, 2000);
        });

        // Reset settings
        document.getElementById('resetSettings').addEventListener('click', function() {
            if (confirm('Are you sure you want to reset all settings to default? This action cannot be undone.')) {
                location.reload();
            }
        });

        // File upload handling
        document.getElementById('restore_backup').addEventListener('change', function() {
            if (this.files.length > 0) {
                const file = this.files[0];
                if (confirm(`Are you sure you want to restore from "${file.name}"? This will overwrite current data.`)) {
                    // Handle restore process
                    console.log('Restoring backup:', file.name);
                } else {
                    this.value = '';
                }
            }
        });
    </script>

</body>

<!-- Logout form for CSRF protection -->
<form id="logout-form" action="/logout" method="POST" style="display: none;">
    <input type="hidden" name="_token" value="{{ csrf_token() }}">
</form>

</html>